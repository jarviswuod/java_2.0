Introduction to Servlet

    Client - server
    request -> respoonse
    Helper application (Web container) e.g Tomcat
    missing html page has to be generated by the server via the help of web containers
    Servlet creates the missing byt requested pages
    Deployment Descriptor (web.xml) - It's a special file for which you mention which request which server should be called. Typically it contains several servlets
    - Every servlet has 2 tags
        - Servlet tag  - mention class name
        - Servlet mapping tag - mention url pattern

    - Servlets extends the HttpServlet class



Creating web project in Eclipse
    - For sending a request to your server via html you need an 'action' in your form
    - form,,, 'action' is having a url we need to send the request to server



Create Servlet and Web.xml
    - Just create a normal class extending the HttpServlet class for our class to become a servlet too
    - service() method is a method we use inside of the servlet to help with operations... no other name allowed for effective working servlet
    - The service() method takes in 2 params the request object, and response object
        - request fetches data from the client
        - response sends  the response to the client

            service(HttpServletRequest req, HttpServletResponse res) {...}

    - req.getParameter(name) to take input from our form
        - 'name' refers to the actual name we assingned our field under our form

    - Query string - a part where you can send your data from a client to a server
    - web.xml(deployment descriptor) contains all the configurations between our  html page and servlet class/objects
        - there are 2 tags inside of this;
            - servlet tag
                - servlet name
                - servlet class
            - servlet mapping tag
                - servlet name
                - url pattern

    - response gives out a response to the client i.e from the server via a res.getWriter() method
        res.getWriter() returns an object of PrintWriter

            PrintWriter out = res.getWriter();
            out.println("response is here");


Get and Post Method:
    - HyperText Transfer Protocal HTTP methods
        - Get(default method) - Receive data from server
        - Post - Submit data to server
        - Put
        - Delete
        - Options

        NOTE:
          - post doesnot put your data in the url

    - doPost() is a - subclass offered by servlet to only allow post method
    - doGet()

        doPost(HttpServletRequest req, HttpServletResponse res) {...}
        doGet(HttpServletRequest req, HttpServletResponse res) {...}


RequestDispatcher (Calling a Servlet from Servlet)
    - calling a servlet from a page and 
    - calling a servlet from a servlet
        - Can be achieved in 2 ways either;
            1. RequestDispatcher or
            2. Redirect

    - RequestDispatcher rd = req.getRequestDispatcher("sq");
      rd.forward(req, res);

    - session management - to enable sharing data between servlets or send data between server and servlet
        setAttrribute(key, value);
        getAttrribute(key);



HttpServletRequest & HttpServletResponse
    - These 2 objects doesnot have to be created, TOMCAT server gives you a reference to them


RequestDispatcher and sendRedirect
    - RequestDispatcher works well if both serlets are from the same website... The same request and response objects are used/needed to make it a success

    - sendRedirect() 2 different requests and responsise objects are used/needed to make it a success


sendRedirect() - URL Rewriting
    - res.sendRedirect("servlet-name")
        public void doGet(HttpServletRequest req, HttpServletResponse res) {
            res.sendRedirect("sq?k=" + k);
        }

        public void doGet(HttpServletRequest req, HttpServletResponse res) {
            req.getParameter("k");
        }


    - session management concepts:
        - Session
        - cookies
        - URL rewriting




HttpSession and Cookie:
    - HttpSession
        - URL Rewriting does not work good with multiple values or working with same value in multiple servlets, it makes it hard to maintain
        - HttpSession means- Whenever you go to a web app it wil try to maintain a session for you (DONE BY TOMCAT)
        - Session is provided a reference to by TOMCAt example

            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                HttpSession session = req.getSession();
                session.setAttribute(name, value);
            }

        - Available and accessbile inside the same website provided you don't close the session or remove the session

            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                HttpSession session = req.getSession();
                int k = (int) session.getAttribute(name);
            }

        - Removing/deleting session
            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                HttpSession session = req.getSession();
                session.removeAttribute(name);
            }

        - Used to maintain the logins of a website


    - Cookies
        - Whenever you send a request to the server and the server send you a response, inside the response object we have a cookie and when you send your request to the server again you can send the same cookie again -  the cookie is coming on the client side and you sending it back
        - Cookie belongs to the javax.servlet.http package
            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                Cookie cookie = new Cookie("k", k + "");
                res.addCookie(cookie);
            }

        - Using cookies
            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                int k = 0;
                Cookie cookies[] = req.getCookies();
                
                for(Cookie c : cookies) {
                    if(c.getName().equals("k"))
                        k = Integer.parseInt(c.getValue());
                }
                k = k * k;
            }



ServletConfig & ServletContext
    - Used to get initial values for a servlet or app example to set file path
    - This setting is done under web.xml file and then use the params inside our code
    - They are both interfaces
    - Can be used to specifcy the file path, the way, the location of your DB password and username path

    - ServletContext
        - How we set it
            - context-param
                - param-name
                - param-value

        - How we use it:
            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                PrintWriter out = res.getWriter();
                out.println("Hi ");

                ServletContext ctx =  getServletContext();
                String str = ctx.getInitParameter("Phone");
                out.println(str);
            }


    - ServletConfig
        - Works exactly the same way as ServletContext, the only difference is ServletContext is shared by all the servlets while config is specific to a servlet
        - NOTE:
            - Multiple servlets to share same value -> serlet-context
            - Different values for different servlets serlet-config


        - How we set it

            - servlet
                ...
                servlet-name
                servlet-class

                    init-param
                        param-name
                        param-value


        - How we use it:
            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                PrintWriter out = res.getWriter();
                out.println("Hi ");

                ServletConfig cnf =  getServletConfig();
                String str = cnf.getInitParameter("Phone");
                out.println(str);
            }


Servlet Annotation Configuration:
    - This simplifies the whole hustle of having to deal with our Deployment Descriptor (web.xml) file
    - IN any java project; someone can go either Annotations or the xml file
    - All needed now is to add an annotation [@WebServlet(urlpath)] on top of our servlet and we are done
    - Example

        @WebServlet("/add")
        public class AddServlet extends HttpServlet {

            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                int i = req.getParameter("num1");
                int j = req.getParameter("num2");

                ...
            }
        }

        @WebServlet("/sq")
        public class SqServlet extends HttpServlet {

            public void doGet(HttpServletRequest req, HttpServletResponse res) {
                int i = req.getParameter("num1");
                int j = req.getParameter("num2");

                ...
            }
        }


Why JSP?
    - JSp stands for Java Server Pages
        - In Servlet we write HTML inside java
        - In JSP we write Java inside HTML

    - JSP helps in adding beauty to the website with less hustle
    - Implicit objects in JSP
    - Example
        BEFORE::
            index.html
                <form action = "add" method = "get">... </form>

        AFTER::
            index.html
                <form action = "add.jsp" method = "get">... </form>

            add.jsp
                <html>
                    <body>
                        <div>
                            <%
                            int i = req.getParameter("num1");
                            int j = req.getParameter("num2");

                            ...

                            %>
                        </div>
                    </body>
                </html>
        

How JSP Translated into Servlets
    - You can only write code in jsp but not run it
    - Servlets run on TOMCAT because TOMCAT is also called a servlet container meaning you can ony run servlets not JSP
    - JSP gets conveter do into servlets before running it
    - The onlyu advantage ot JSP is that it's easier for devs to write JSP files instead of working on servlets

    - Scriplet - jsp code that contains our java code inside the html
        <% ... %>

    - declaration tag - For defining any variable/methods inside JSP file
        - NOTE::
            - Code comes outside the service() method
         <%! ... %>

    - Directive tag - Importing a package inside of JSP file
        <%@page import="java.util.Date, java.util.Scanner">

    - Expression tag - for outputting data we want to be logged out to the browser
         <%= ... %>


JSP Directive Page Include TagLib
    - Inside of JSP Directive tag we have;
        - @page
        - @include
        - @taglib

